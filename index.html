<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Entrenador en Casa</title>
<style>
body {font-family: 'Segoe UI', sans-serif; margin:0; background:#0f172a; color:#f8fafc; transition: background 0.5s;}
header {background:linear-gradient(90deg, #06b6d4, #3b82f6); padding:1rem; text-align:center;}
header h1 {margin:0; font-size:1.8rem;}
main {max-width:900px; margin:auto; padding:1rem;}
label {display:block; margin-top:1rem; font-weight:bold;}
select, button, input {width:100%; padding:0.6rem; border-radius:8px; border:none; font-size:1rem; margin-top:0.3rem;}
select, input {background:#1e293b; color:white;}
button {background:#3b82f6; color:white; font-weight:bold; cursor:pointer;}
button:hover {background:#2563eb;}
.ejercicio {background:#1e293b; padding:1rem; border-radius:12px; margin-bottom:1rem;}
.desc {font-size:0.95rem; color:#cbd5e1;}
.timer {display:flex; gap:0.5rem; align-items:center; margin-top:0.5rem;}
.time-display {font-size:1.2rem; font-weight:bold; color:#06b6d4;}
#autoMode {display:none; height:100vh; text-align:center; color:white; padding:2rem;}
#autoMode h2 {font-size:2rem;}
#currentExercise {font-size:2rem; margin-top:1rem;}
#exerciseDesc {font-size:1rem; margin-bottom:1rem; color:#f1f5f9;}
#timerDisplay {font-size:5rem; margin:1rem 0;}
#nextExercise {margin-top:2rem; font-size:1.2rem; color:#cbd5e1;}
</style>
</head>
<body>
<header>
<h1>üèãÔ∏è‚Äç‚ôÇÔ∏è Entrenador en Casa</h1>
<p>Rutinas de 30 minutos sin equipo</p>
</header>
<main id="setup">
<label for="nivel">Nivel:</label>
<select id="nivel">
<option value="principiante">Principiante</option>
<option value="intermedio">Intermedio</option>
<option value="avanzado">Avanzado</option>
</select>
<label for="objetivo">Objetivo:</label>
<select id="objetivo">
<option value="masa">Ganar masa muscular</option>
<option value="tonificar">Tonificar</option>
<option value="perder">Perder grasa</option>
</select>
<button onclick="mostrarRutina()">Modo Manual</button>
<button onclick="iniciarAutomatico()">Modo Autom√°tico</button>
<div id="resultado"></div>
</main>
<div id="autoMode">
<h2 id="estado"></h2>
<div id="currentExercise"></div>
<div id="exerciseDesc"></div>
<div id="timerDisplay"></div>
<div id="nextExercise"></div>
<button id="pauseBtn" onclick="pausarReanudar()">Pausar</button>
</div>

<script>
// Generar beep corto y largo sin depender de internet
function generarBeep(frecuencia, duracion) {
  const ctx = new (window.AudioContext || window.webkitAudioContext)();
  return function() {
    const osc = ctx.createOscillator();
    const gain = ctx.createGain();
    osc.connect(gain);
    gain.connect(ctx.destination);
    osc.frequency.value = frecuencia;
    osc.type = "sine";
    osc.start();
    gain.gain.setValueAtTime(1, ctx.currentTime);
    gain.gain.exponentialRampToValueAtTime(0.0001, ctx.currentTime + duracion/1000);
    osc.stop(ctx.currentTime + duracion/1000);
  }
}
const beepShort = generarBeep(1000, 150);
const beepLong = generarBeep(500, 400);

let pausado = false, intervalo, indiceActual = 0, tiempoTotal = 0;
let ejerciciosActuales = [];
let descanso = 15;

function crearTemporizador(segundos, display, btn) {
  let tiempo = segundos;
  display.textContent = `${tiempo}s`;
  let intv = setInterval(() => {
    if (!pausado) {
      tiempo--;
      display.textContent = `${tiempo}s`;
      if (tiempo <= 0) {
        clearInterval(intv);
        beepLong();
        display.textContent = "¬°Completado!";
        btn.disabled = false;
        btn.textContent = "Reiniciar";
        btn.onclick = () => crearTemporizador(segundos, display, btn);
      }
    }
  }, 1000);
}

function mostrarRutina() {
  const nivel = document.getElementById("nivel").value;
  const objetivo = document.getElementById("objetivo").value;
  const lista = rutinas[nivel][objetivo];
  const cont = document.getElementById("resultado");
  cont.innerHTML = `<h2>Rutina ${nivel} - ${objetivo}</h2>` +
    lista.map(ej => {
      let tiempoDefault = (ej.tiempo === "reps") ? 40 : ej.tiempo;
      return `
        <div class="ejercicio">
          <strong>${ej.nombre}</strong>
          <div class="desc">${ej.desc}</div>
          <div class="timer">
            <input type="number" value="${tiempoDefault}" min="5" max="600" style="width:60px;text-align:center;">s
            <button>Iniciar</button>
            <span class="time-display"></span>
          </div>
        </div>
      `;
    }).join("");
  cont.querySelectorAll(".ejercicio").forEach(ejDiv => {
    const btn = ejDiv.querySelector("button");
    const input = ejDiv.querySelector("input");
    const display = ejDiv.querySelector(".time-display");
    btn.onclick = () => {
      btn.disabled = true;
      crearTemporizador(parseInt(input.value), display, btn);
    };
  });
}

function iniciarAutomatico() {
  const nivel = document.getElementById("nivel").value;
  const objetivo = document.getElementById("objetivo").value;
  ejerciciosActuales = rutinas[nivel][objetivo].map(ej => {
    return { ...ej, tiempo: (ej.tiempo === "reps") ? 40 : ej.tiempo };
  });
  document.getElementById("setup").style.display = "none";
  document.getElementById("autoMode").style.display = "block";
  indiceActual = 0;
  tiempoTotal = 0;
  ejecutarEjercicio();
}

function ejecutarEjercicio() {
  if (indiceActual >= ejerciciosActuales.length) {
    document.body.style.background = "#0f172a";
    document.getElementById("autoMode").innerHTML = `<h1>¬°Rutina completada!</h1>
      <p>Tiempo total: ${Math.round(tiempoTotal/60)} min</p>
      <button onclick="location.reload()">Reiniciar</button>`;
    return;
  }
  let ej = ejerciciosActuales[indiceActual];
  document.body.style.background = "#2563eb";
  document.getElementById("estado").textContent = "Prep√°rate";
  document.getElementById("currentExercise").textContent = ej.nombre;
  document.getElementById("exerciseDesc").textContent = ej.desc;
  document.getElementById("nextExercise").textContent = indiceActual+1 < ejerciciosActuales.length 
    ? `Siguiente: ${ejerciciosActuales[indiceActual+1].nombre}` 
    : "√öltimo ejercicio";
  let prep = 3;
  document.getElementById("timerDisplay").textContent = prep;
  intervalo = setInterval(() => {
    if (!pausado) {
      beepShort();
      prep--;
      document.getElementById("timerDisplay").textContent = prep;
      if (prep <= 0) {
        clearInterval(intervalo);
        iniciarCuentaAtras(ej.tiempo);
      }
    }
  }, 1000);
}

function iniciarCuentaAtras(tiempo) {
  document.body.style.background = "#16a34a";
  document.getElementById("estado").textContent = "Ejercicio";
  let restante = tiempo;
  document.getElementById("timerDisplay").textContent = restante;
  intervalo = setInterval(() => {
    if (!pausado) {
      restante--;
      tiempoTotal++;
      document.getElementById("timerDisplay").textContent = restante;
      if (restante <= 0) {
        clearInterval(intervalo);
        beepLong();
        iniciarDescanso();
      }
    }
  }, 1000);
}

function iniciarDescanso() {
  document.body.style.background = "#dc2626";
  document.getElementById("estado").textContent = "Descanso";
  let restante = descanso;
  document.getElementById("timerDisplay").textContent = restante;
  intervalo = setInterval(() => {
    if (!pausado) {
      restante--;
      tiempoTotal++;
      document.getElementById("timerDisplay").textContent = restante;
      if (restante <= 0) {
        clearInterval(intervalo);
        indiceActual++;
        ejecutarEjercicio();
      }
    }
  }, 1000);
}

function pausarReanudar() {
  pausado = !pausado;
  document.getElementById("pauseBtn").textContent = pausado ? "Reanudar" : "Pausar";
}

// Rutinas con descripci√≥n breve
const rutinas = {
  principiante: {
    masa: [
      {nombre:"Movilidad articular", desc:"Gira cuello, hombros, cadera y rodillas suavemente", tiempo:180},
      {nombre:"Marcha en el sitio", desc:"Levanta rodillas y mueve brazos", tiempo:120},
      {nombre:"Flexiones inclinadas", desc:"Apoya manos en pared o mesa, baja y sube", tiempo:"reps"},
      {nombre:"Sentadillas", desc:"Pies a ancho de hombros, baja hasta 90¬∞ y sube", tiempo:"reps"},
      {nombre:"Fondos en silla", desc:"Manos en silla, baja y sube controlado", tiempo:"reps"},
      {nombre:"Plancha", desc:"Antebrazos apoyados, cuerpo recto y abdomen firme", tiempo:30},
      {nombre:"Caminar en el sitio", desc:"Paso suave para bajar pulsaciones", tiempo:120},
      {nombre:"Estiramientos", desc:"Estira brazos, piernas y espalda", tiempo:180}
    ],
    tonificar: [
      {nombre:"Jumping jacks", desc:"Salta abriendo y cerrando piernas y brazos", tiempo:120},
      {nombre:"Trota en el sitio", desc:"Movimiento suave de piernas y brazos", tiempo:120},
      {nombre:"Sentadillas", desc:"Baja controlado y sube despacio", tiempo:"reps"},
      {nombre:"Flexiones rodillas apoyadas", desc:"Apoya rodillas, baja y sube", tiempo:"reps"},
      {nombre:"Plancha lateral", desc:"Apoyo lateral, cuerpo alineado", tiempo:20},
      {nombre:"Mountain climbers", desc:"Lleva rodillas al pecho r√°pido", tiempo:30},
      {nombre:"Caminar suave", desc:"Paso lento para recuperar", tiempo:120},
      {nombre:"Estiramientos", desc:"Estira cuello, brazos y piernas", tiempo:180}
    ],
    perder: [
      {nombre:"Jumping jacks", desc:"Saltos con brazos y piernas", tiempo:120},
      {nombre:"Trota en el sitio", desc:"Movimientos r√°pidos", tiempo:120},
      {nombre:"Burpees", desc:"Salto + flexi√≥n", tiempo:"reps"},
      {nombre:"Sentadillas con salto", desc:"Baja y salta explosivo", tiempo:"reps"},
      {nombre:"Mountain climbers", desc:"Rodillas al pecho r√°pido", tiempo:30},
      {nombre:"Plancha", desc:"Mant√©n core firme", tiempo:20},
      {nombre:"Caminar suave", desc:"Baja pulsaciones", tiempo:120},
      {nombre:"Estiramientos", desc:"Estira todo el cuerpo", tiempo:180}
    ]
  },
  intermedio: {
    masa: [
      {nombre:"Calentamiento din√°mico", desc:"Rotaciones articulares y movilidad", tiempo:180},
      {nombre:"Zancadas", desc:"Alterna piernas bajando rodillas al suelo", tiempo:"reps"},
      {nombre:"Flexiones normales", desc:"Manos a ancho de hombros, baja y sube", tiempo:"reps"},
      {nombre:"Fondos en silla", desc:"Baja y sube controlando", tiempo:"reps"},
      {nombre:"Plancha", desc:"Core firme y espalda recta", tiempo:40},
      {nombre:"Burpees", desc:"Flexi√≥n + salto", tiempo:"reps"},
      {nombre:"Caminar suave", desc:"Recupera pulsaciones", tiempo:120},
      {nombre:"Estiramientos", desc:"Brazos, piernas y espalda", tiempo:180}
    ],
    tonificar: [
      {nombre:"Skipping alto", desc:"Rodillas al pecho r√°pido", tiempo:60},
      {nombre:"Sentadillas", desc:"Baja y sube controlado", tiempo:"reps"},
      {nombre:"Flexiones tr√≠ceps", desc:"Codos pegados al cuerpo", tiempo:"reps"},
      {nombre:"Plancha lateral", desc:"Mant√©n alineado", tiempo:30},
      {nombre:"Mountain climbers", desc:"Movimiento r√°pido", tiempo:40},
      {nombre:"Saltos laterales", desc:"De un lado a otro", tiempo:30},
      {nombre:"Caminar suave", desc:"Recupera respiraci√≥n", tiempo:120},
      {nombre:"Estiramientos", desc:"Relaja m√∫sculos", tiempo:180}
    ],
    perder: [
      {nombre:"Jumping jacks", desc:"Saltos", tiempo:60},
      {nombre:"Sprints en el sitio", desc:"Alta intensidad", tiempo:30},
      {nombre:"Burpees", desc:"Potentes", tiempo:"reps"},
      {nombre:"Sentadillas con salto", desc:"Explosivas", tiempo:"reps"},
      {nombre:"Mountain climbers", desc:"Explosivos", tiempo:40},
      {nombre:"Saltos laterales", desc:"Agilidad", tiempo:30},
      {nombre:"Caminar suave", desc:"Recupera", tiempo:60},
      {nombre:"Estiramientos", desc:"Relaja todo", tiempo:180}
    ]
  },
  avanzado: {
    masa: [
      {nombre:"Calentamiento intenso", desc:"Movilidad y activaci√≥n muscular", tiempo:180},
      {nombre:"Zancadas con salto", desc:"Explosivas alternando", tiempo:"reps"},
      {nombre:"Flexiones diamante", desc:"Manos juntas en tri√°ngulo", tiempo:"reps"},
      {nombre:"Burpees con flexi√≥n", desc:"Completo", tiempo:"reps"},
      {nombre:"Plancha con toques de hombro", desc:"Core firme, toca hombros", tiempo:40},
      {nombre:"Sentadillas pistol asistidas", desc:"Una pierna, con apoyo", tiempo:"reps"},
      {nombre:"Caminar suave", desc:"Recupera", tiempo:60},
      {nombre:"Estiramientos", desc:"Relaja todo", tiempo:180}
    ],
    tonificar: [
      {nombre:"Skipping alto", desc:"Rodillas al pecho", tiempo:60},
      {nombre:"Sentadillas", desc:"Control y fuerza", tiempo:"reps"},
      {nombre:"Flexiones con palmada", desc:"Explosivas", tiempo:"reps"},
      {nombre:"Plancha lateral con elevaci√≥n", desc:"Dificultad extra", tiempo:30},
      {nombre:"Mountain climbers", desc:"R√°pidos", tiempo:40},
      {nombre:"Saltos laterales", desc:"Agilidad", tiempo:30},
      {nombre:"Caminar suave", desc:"Recupera", tiempo:60},
      {nombre:"Estiramientos", desc:"Finaliza relajado", tiempo:180}
    ],
    perder: [
      {nombre:"Jump squats", desc:"Saltos verticales", tiempo:"reps"},
      {nombre:"Mountain climbers", desc:"Explosivos", tiempo:40},
      {nombre:"Saltos laterales", desc:"Agilidad", tiempo:30},
      {nombre:"Plancha", desc:"Mant√©n firme", tiempo:40},
      {nombre:"Caminar suave", desc:"Recupera", tiempo:60},
      {nombre:"Estiramientos", desc:"Finaliza relajado", tiempo:180}
    ]
  }
};
</script>
</body>
</html>
